@if (form(); as form) {
  <div class="k-display-flex k-gap-10 k-flex-column">
    <form [formGroup]="form">
      <div class="k-display-flex k-flex-column k-gap-10">
        <div class="k-display-flex k-gap-5">
          <kendo-label [text]="'auth.id_number' | transloco">
            <kendo-textbox [clearButton]="true" formControlName="personalNumber" />
            @if (form.controls['personalNumber']; as control) {
              @if (!control.untouched) {
                @if (control.errors?.['required']) {
                  <kendo-formerror>{{ 'shared.fieldIsRequired' | transloco }}</kendo-formerror>
                }
                @if (control.errors?.['personalNumberError']) {
                  <kendo-formerror>{{ 'shared.invalidPersonalNumber' | transloco }}</kendo-formerror>
                }
              }
            }
          </kendo-label>

          <kendo-label [text]="'auth.last_name' | transloco">
            <kendo-textbox [clearButton]="true" formControlName="lastname" />
            @if (form.controls['lastname']; as control) {
              @if (!control.untouched) {
                @if (control.errors?.['required']) {
                  <kendo-formerror>{{ 'shared.fieldIsRequired' | transloco }}</kendo-formerror>
                }
                @if (control.errors?.['georgianLettersError']) {
                  <kendo-formerror>{{ 'shared.invalidGeorgianLetters' | transloco }}</kendo-formerror>
                }
              }
            }
          </kendo-label>
        </div>

        @if (isPersonVerified()) {
          <div class="k-display-flex k-gap-5">
            <kendo-label [text]="'auth.name' | transloco">
              <kendo-textbox [clearButton]="true" [readonly]="true" formControlName="firstname" />
            </kendo-label>

            <kendo-label [text]="'auth.date_of_birth' | transloco">
              <kendo-datepicker [clearButton]="true" [readonly]="true" formControlName="dateOfBirth" />
            </kendo-label>
          </div>
        }

        <div class="k-display-flex k-justify-content-between">
          <button kendoButton themeColor="secondary" type="button" (click)="onPreviousClick()">
            {{ 'auth.previous' | transloco }}
          </button>

          <button
            kendoButton
            themeColor="primary"
            type="button"
            (click)="isPersonVerified() ? onNextClick() : onCheckClick()"
          >
            {{ isPersonVerified() ? ('auth.next' | transloco) : ('auth.check' | transloco) }}
          </button>
        </div>
      </div>
    </form>
  </div>
}
